<html>
  <head>
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <!-- CSS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="/assets/css/normalize.css">
    <link rel="stylesheet" href="/assets/css/skeleton.css">
    <link rel="stylesheet" href="/assets/css/main.css">
  </head>
  <body>
    <div class="links">
      <a href="/">Home</a>
      <a href="https://twitter.com/taylorthesavage">Twitter</a>
      <a href="https://www.linkedin.com/in/tjsavage">LinkedIn</a>
      <a href="talks">Talks</a>
    </div>
    <!---

This README is automatically generated from the comments in these files:
app-location.html  app-route-converter-behavior.html  app-route-converter.html  app-route.html

Edit those files, and our readme bot will duplicate them over here!
Edit this file, and the bot will squash your changes :)

The bot does some handling of markdown. Please file a bug if it does the wrong
thing! https://github.com/PolymerLabs/tedium/issues

-->
<p><a href="https://travis-ci.org/PolymerElements/app-route"><img src="https://travis-ci.org/PolymerElements/app-route.svg?branch=master" alt="Build status"></a></p>
<p>##&lt;app-route&gt;</p>
<p><code>app-route</code> is an element that enables declarative, self-describing routing
for a web app.</p>
<blockquote>
<p><em>n.b. app-route is still in beta. We expect it will need some changes. We&#39;re counting on your feedback!</em></p>
</blockquote>
<p>In its typical usage, a <code>app-route</code> element consumes an object that describes
some state about the current route, via the <code>route</code> property. It then parses
that state using the <code>pattern</code> property, and produces two artifacts: some <code>data</code>
related to the <code>route</code>, and a <code>tail</code> that contains the rest of the <code>route</code> that
did not match.</p>
<p>Here is a basic example, when used with <code>app-location</code>:</p>
<pre><code class="language-html">&lt;app-location route=&quot;{{route}}&quot;&gt;&lt;/app-location&gt;
&lt;app-route
    route=&quot;{{route}}&quot;
    pattern=&quot;/:page&quot;
    data=&quot;{{data}}&quot;
    tail=&quot;{{tail}}&quot;&gt;
&lt;/app-route&gt;
</code></pre>
<p>In the above example, the <code>app-location</code> produces a <code>route</code> value. Then, the
<code>route.path</code> property is matched by comparing it to the <code>pattern</code> property. If
the <code>pattern</code> property matches <code>route.path</code>, the <code>app-route</code> will set or update
its <code>data</code> property with an object whose properties correspond to the parameters
in <code>pattern</code>. So, in the above example, if <code>route.path</code> was <code>&#39;/about&#39;</code>, the value
of <code>data</code> would be <code>{&quot;page&quot;: &quot;about&quot;}</code>.</p>
<p>The <code>tail</code> property represents the remaining part of the route state after the
<code>pattern</code> has been applied to a matching <code>route</code>.</p>
<p>Here is another example, where <code>tail</code> is used:</p>
<pre><code class="language-html">&lt;app-location route=&quot;{{route}}&quot;&gt;&lt;/app-location&gt;
&lt;app-route
    route=&quot;{{route}}&quot;
    pattern=&quot;/:page&quot;
    data=&quot;{{routeData}}&quot;
    tail=&quot;{{subroute}}&quot;&gt;
&lt;/app-route&gt;
&lt;app-route
    route=&quot;{{subroute}}&quot;
    pattern=&quot;/:id&quot;
    data=&quot;{{subrouteData}}&quot;&gt;
&lt;/app-route&gt;
</code></pre>
<p>In the above example, there are two <code>app-route</code> elements. The first
<code>app-route</code> consumes a <code>route</code>. When the <code>route</code> is matched, the first
<code>app-route</code> also produces <code>routeData</code> from its <code>data</code>, and <code>subroute</code> from
its <code>tail</code>. The second <code>app-route</code> consumes the <code>subroute</code>, and when it
matches, it produces an object called <code>subrouteData</code> from its <code>data</code>.</p>
<p>So, when <code>route.path</code> is <code>&#39;/about&#39;</code>, the <code>routeData</code> object will look like
this: <code>{ page: &#39;about&#39; }</code></p>
<p>And <code>subrouteData</code> will be null. However, if <code>route.path</code> changes to
<code>&#39;/article/123&#39;</code>, the <code>routeData</code> object will look like this:
<code>{ page: &#39;article&#39; }</code></p>
<p>And the <code>subrouteData</code> will look like this: <code>{ id: &#39;123&#39; }</code></p>
<p><code>app-route</code> is responsive to bi-directional changes to the <code>data</code> objects
they produce. So, if <code>routeData.page</code> changed from <code>&#39;article&#39;</code> to <code>&#39;about&#39;</code>,
the <code>app-route</code> will update <code>route.path</code>. This in-turn will update the
<code>app-location</code>, and cause the global location bar to change its value.</p>
<p>##&lt;app-location&gt;</p>
<p><code>app-location</code> is an element that provides synchronization between the
browser location bar and the state of an app. When created, <code>app-location</code>
elements will automatically watch the global location for changes. As changes
occur, <code>app-location</code> produces and updates an object called <code>route</code>. This
<code>route</code> object is suitable for passing into a <code>app-route</code>, and other similar
elements.</p>
<p>An example of the public API of a route object that describes the URL
<code>https://elements.polymer-project.org/elements/app-location</code>:</p>
<pre><code class="language-css">{
  prefix: &#39;&#39;,
  path: &#39;/elements/app-location&#39;
}
</code></pre>
<p>Example Usage:</p>
<pre><code class="language-html">&lt;app-location route=&quot;{{route}}&quot;&gt;&lt;/app-location&gt;
&lt;app-route route=&quot;{{route}}&quot; pattern=&quot;/:page&quot; data=&quot;{{data}}&quot;&gt;&lt;/app-route&gt;
</code></pre>
<p>As you can see above, the <code>app-location</code> element produces a <code>route</code> and that
property is then bound into the <code>app-route</code> element. The bindings are two-
directional, so when changes to the <code>route</code> object occur within <code>app-route</code>,
they automatically reflect back to the global location.</p>
<h3>Hashes vs Paths</h3><p>By default <code>app-location</code> routes using the pathname portion of the URL. This has
broad browser support but it does require cooperation of the backend server. An
<code>app-location</code> can be configured to use the hash part of a URL instead using
the <code>use-hash-as-path</code> attribute, like so:</p>
<pre><code class="language-html">&lt;app-location route=&quot;{{route}}&quot; use-hash-as-path&gt;&lt;/app-location&gt;
</code></pre>
<h3>Integrating with other routing code</h3><p>There is no standard event that is fired when window.location is modified.
<code>app-location</code> fires a <code>location-changed</code> event on <code>window</code> when it updates the
location. It also listens for that same event, and re-reads the URL when it&#39;s
fired. This makes it very easy to interop with other routing code.</p>
<p>So for example if you want to navigate to <code>/new_path</code> imperatively you could
call <code>window.location.pushState</code> or <code>window.location.replaceState</code> followed by
firing a <code>location-changed</code> event on <code>window</code>. i.e.</p>
<pre><code class="language-javascript">window.history.pushState({}, null, &#39;/new_path&#39;);
window.dispatchEvent(new CustomEvent(&#39;location-changed&#39;));
</code></pre>
<p>##&lt;app-route-converter&gt;</p>
<p><code>app-route-converter</code> provides a means to convert a path and query
parameters into a route object and vice versa. This produced route object
is to be fed into route-consuming elements such as <code>app-route</code>.</p>
<blockquote>
<p>n.b. This element is intended to be a primitive of the routing system and for
creating bespoke routing solutions from scratch. To simply include routing in
an app, please refer to <a href="https://github.com/PolymerElements/app-route/blob/master/app-location.html">app-location</a>
and <a href="https://github.com/PolymerElements/app-route/blob/master/app-route.html">app-route</a>.</p>
</blockquote>
<p>An example of a route object that describes
<code>https://elements.polymer-project.org/elements/app-route-converter?foo=bar&amp;baz=qux</code>
and should be passed to other <code>app-route</code> elements:</p>
<pre><code class="language-css">{
  prefix: &#39;&#39;,
  path: &#39;/elements/app-route-converter&#39;,
  __queryParams: {
    foo: &#39;bar&#39;,
    baz: &#39;qux&#39;
  }
}
</code></pre>
<p><code>__queryParams</code> is private to discourage directly data-binding to it. This is so
that routing elements like <code>app-route</code> can intermediate changes to the query
params and choose whether to propagate them upstream or not. <code>app-route</code> for
example will not propagate changes to its <code>queryParams</code> property if it is not
currently active. A public queryParams object will also be produced in which you
should perform data-binding operations.</p>
<p>Example Usage:</p>
<pre><code class="language-html">&lt;iron-location path=&quot;{{path}}&quot; query=&quot;{{query}}&quot;&gt;&lt;/iron-location&gt;
&lt;iron-query-params
    params-string=&quot;{{query}}&quot;
    params-object=&quot;{{queryParams}}&quot;&gt;
&lt;/iron-query-params&gt;
&lt;app-route-converter
    path=&quot;{{path}}&quot;
    query-params=&quot;{{queryParams}}&quot;
    route=&quot;{{route}}&quot;&gt;
&lt;/app-route-converter&gt;
&lt;app-route route=&#39;{{route}}&#39; pattern=&#39;/:page&#39; data=&#39;{{data}}&#39;&gt;
&lt;/app-route&gt;
</code></pre>
<p>This is a simplified implementation of the <code>app-location</code> element. Here the
<code>iron-location</code> produces a path and a query, the <code>iron-query-params</code> consumes
the query and produces a queryParams object, and the <code>app-route-converter</code>
consumes the path and the query params and converts it into a route which is in
turn is consumed by the <code>app-route</code>.</p>
<p>##Polymer.AppRouteConverterBehavior</p>
<p>Provides bidirectional mapping between <code>path</code> and <code>queryParams</code> and a
app-route compatible <code>route</code> object.</p>
<p>For more information, see the docs for <code>app-route-converter</code>.</p>
  </body>
</html>